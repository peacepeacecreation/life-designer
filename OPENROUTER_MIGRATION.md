# –ú—ñ–≥—Ä–∞—Ü—ñ—è –Ω–∞ OpenRouter –¥–ª—è Embeddings

## –ß–æ–º—É OpenRouter?

OpenRouter –Ω–∞–¥–∞—î **—î–¥–∏–Ω–∏–π API** –¥–ª—è –¥–æ—Å—Ç—É–ø—É –¥–æ —Å–æ—Ç–µ–Ω—å AI –º–æ–¥–µ–ª–µ–π, –≤–∫–ª—é—á–∞—é—á–∏ –≤—Å—ñ –º–æ–¥–µ–ª—ñ OpenAI –¥–ª—è embeddings.

### –ü–µ—Ä–µ–≤–∞–≥–∏:

‚úÖ **–û–¥–∏–Ω API –∫–ª—é—á** - –¥–æ—Å—Ç—É–ø –¥–æ –≤—Å—ñ—Ö –º–æ–¥–µ–ª–µ–π —á–µ—Ä–µ–∑ –æ–¥–∏–Ω –∫–ª—é—á
‚úÖ **–î–µ—à–µ–≤—à–µ** - —á–∞—Å—Ç–æ –Ω–∏–∂—á–∞ —Ü—ñ–Ω–∞ –Ω—ñ–∂ –ø—Ä—è–º–∏–π OpenAI API
‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω—ñ fallbacks** - —è–∫—â–æ –æ–¥–Ω–∞ –º–æ–¥–µ–ª—å –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞, –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î —ñ–Ω—à—É
‚úÖ **–ü—Ä–æ–∑–æ—Ä—ñ—Å—Ç—å** - –≤—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —Ç–∞ –≤–∞—Ä—Ç–æ—Å—Ç—ñ
‚úÖ **–°—É–º—ñ—Å–Ω—ñ—Å—Ç—å** - 100% —Å—É–º—ñ—Å–Ω–∏–π –∑ OpenAI API —Ñ–æ—Ä–º–∞—Ç–æ–º

## –®–≤–∏–¥–∫–∞ –º—ñ–≥—Ä–∞—Ü—ñ—è

### –ö—Ä–æ–∫ 1: –û—Ç—Ä–∏–º–∞—Ç–∏ OpenRouter API –∫–ª—é—á

1. –ó–∞—Ä–µ—î—Å—Ç—Ä—É–π—Ç–µ—Å—è –Ω–∞ [OpenRouter](https://openrouter.ai/)
2. –ü–µ—Ä–µ–π–¥—ñ—Ç—å –¥–æ [Keys](https://openrouter.ai/keys)
3. –°—Ç–≤–æ—Ä—ñ—Ç—å –Ω–æ–≤–∏–π API –∫–ª—é—á
4. –°–∫–æ–ø—ñ—é–π—Ç–µ –∫–ª—é—á (–ø–æ—á–∏–Ω–∞—î—Ç—å—Å—è –∑ `sk-or-v1-...`)

### –ö—Ä–æ–∫ 2: –û–Ω–æ–≤–∏—Ç–∏ .env.local

–í—ñ–¥–∫—Ä–∏–π—Ç–µ –≤–∞—à `.env.local` —Ñ–∞–π–ª —ñ –¥–æ–¥–∞–π—Ç–µ:

```bash
# –†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ: OpenRouter
OPENROUTER_API_KEY=sk-or-v1-–≤–∞—à-–∫–ª—é—á-—Ç—É—Ç

# –û–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ: –º–æ–∂–Ω–∞ –∑–∞–ª–∏—à–∏—Ç–∏ —è–∫ fallback
# OPENAI_API_KEY=sk-–≤–∞—à-openai-–∫–ª—é—á-—Ç—É—Ç
```

**–í–∞–∂–ª–∏–≤–æ**: –Ø–∫—â–æ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –æ–±–∏–¥–≤–∞ –∫–ª—é—á—ñ, `OPENROUTER_API_KEY` –º–∞—Ç–∏–º–µ **–ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç**.

### –ö—Ä–æ–∫ 3: –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–∏ —Å–µ—Ä–≤–µ—Ä

```bash
# –ó—É–ø–∏–Ω—ñ—Ç—å —Å–µ—Ä–≤–µ—Ä (Ctrl+C)
# –ó–∞–ø—É—Å—Ç—ñ—Ç—å –∑–Ω–æ–≤—É
pnpm dev
```

**–ì–æ—Ç–æ–≤–æ!** üéâ –¢–µ–ø–µ—Ä –≤–∞—à –¥–æ–¥–∞—Ç–æ–∫ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î OpenRouter –¥–ª—è embeddings.

## –î–æ—Å—Ç—É–ø–Ω—ñ –º–æ–¥–µ–ª—ñ

OpenRouter –ø—ñ–¥—Ç—Ä–∏–º—É—î –≤—Å—ñ –º–æ–¥–µ–ª—ñ embeddings –≤—ñ–¥ OpenAI:

- `text-embedding-3-small` (1536 dimensions) - **–∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º**
- `text-embedding-3-large` (3072 dimensions) - –≤–∏—â–∞ —Ç–æ—á–Ω—ñ—Å—Ç—å
- `text-embedding-ada-002` (1536 dimensions) - legacy –º–æ–¥–µ–ª—å

### –ó–º—ñ–Ω–∞ –º–æ–¥–µ–ª—ñ

–Ø–∫—â–æ —Ö–æ—á–µ—Ç–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ —ñ–Ω—à—É –º–æ–¥–µ–ª—å, –æ–Ω–æ–≤—ñ—Ç—å `src/lib/embeddings/openai-client.ts`:

```typescript
// –ó–º—ñ–Ω—ñ—Ç—å –º–æ–¥–µ–ª—å –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º
private model = 'text-embedding-3-large'; // –∞–±–æ —ñ–Ω—à–∞ –º–æ–¥–µ–ª—å
```

## –ü–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è –≤–∞—Ä—Ç–æ—Å—Ç—ñ

### OpenAI (–ø—Ä—è–º–∏–π API):
- `text-embedding-3-small`: $0.02 per 1M tokens
- `text-embedding-3-large`: $0.13 per 1M tokens

### OpenRouter:
- –ó–∞–∑–≤–∏—á–∞–π **–¥–µ—à–µ–≤—à–µ** –∞–±–æ **–∞–Ω–∞–ª–æ–≥—ñ—á–Ω–∞ —Ü—ñ–Ω–∞**
- –ê–∫—Ç—É–∞–ª—å–Ω—ñ —Ü—ñ–Ω–∏: [openrouter.ai/models](https://openrouter.ai/models?q=embedding)

## –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å

### –Ø–∫ –¥—ñ–∑–Ω–∞—Ç–∏—Å—è —è–∫–∏–π –ø—Ä–æ–≤–∞–π–¥–µ—Ä –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è?

1. –í—ñ–¥–∫—Ä–∏–π—Ç–µ Developer Console –≤ –±—Ä–∞—É–∑–µ—Ä—ñ
2. –ü–µ—Ä–µ–π–¥—ñ—Ç—å –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫—É –∑ embeddings —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª–æ–º
3. –ü–µ—Ä–µ–≥–ª—è–Ω—å—Ç–µ Network tab
4. API –∑–∞–ø–∏—Ç–∏ –¥–æ:
   - `https://openrouter.ai/api/v1/embeddings` = OpenRouter ‚úÖ
   - `https://api.openai.com/v1/embeddings` = OpenAI Direct

## –í—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

OpenRouter –Ω–∞–¥–∞—î –¥–µ—Ç–∞–ª—å–Ω—É —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É:

1. –í—ñ–¥–∫—Ä–∏–π—Ç–µ [OpenRouter Dashboard](https://openrouter.ai/activity)
2. –ü–µ—Ä–µ–≥–ª—è–¥–∞–π—Ç–µ –≤—Å—ñ –∑–∞–ø–∏—Ç–∏, –≤–∞—Ä—Ç—ñ—Å—Ç—å, —Ç–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –º–æ–¥–µ–ª–µ–π
3. –í—Å—Ç–∞–Ω–æ–≤–ª—é–π—Ç–µ –ª—ñ–º—ñ—Ç–∏ –≤–∏—Ç—Ä–∞—Ç

## –ü–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è –¥–æ OpenAI

–Ø–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ –ø–æ–≤–µ—Ä–Ω—É—Ç–∏—Å—è –¥–æ –ø—Ä—è–º–æ–≥–æ OpenAI API:

1. –í–∏–¥–∞–ª—ñ—Ç—å –∞–±–æ –∑–∞–∫–æ–º–µ–Ω—Ç—É–π—Ç–µ `OPENROUTER_API_KEY` –≤ `.env.local`
2. –ó–∞–ª–∏—à—Ç–µ —Ç—ñ–ª—å–∫–∏ `OPENAI_API_KEY`
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç—ñ—Ç—å —Å–µ—Ä–≤–µ—Ä

```bash
# .env.local
# OPENROUTER_API_KEY=sk-or-v1-... # –∑–∞–∫–æ–º–µ–Ω—Ç–æ–≤–∞–Ω–æ

OPENAI_API_KEY=sk-–≤–∞—à-openai-–∫–ª—é—á-—Ç—É—Ç
```

## –¢–µ—Ö–Ω—ñ—á–Ω—ñ –¥–µ—Ç–∞–ª—ñ

### API Endpoints

**OpenRouter:**
- Base URL: `https://openrouter.ai/api/v1/embeddings`
- –î–æ–¥–∞—Ç–∫–æ–≤—ñ headers: `HTTP-Referer`, `X-Title`

**OpenAI:**
- Base URL: `https://api.openai.com/v1/embeddings`
- –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ñ headers

### –§–æ—Ä–º–∞—Ç –∑–∞–ø–∏—Ç—É/–≤—ñ–¥–ø–æ–≤—ñ–¥—ñ

–û–±–∏–¥–≤–∞ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å **—ñ–¥–µ–Ω—Ç–∏—á–Ω–∏–π —Ñ–æ—Ä–º–∞—Ç**:

```typescript
// Request
{
  "model": "text-embedding-3-small",
  "input": "text to embed",
  "encoding_format": "float"
}

// Response
{
  "data": [{
    "embedding": [0.123, -0.456, ...],
    "index": 0
  }],
  "model": "text-embedding-3-small",
  "usage": {
    "prompt_tokens": 10,
    "total_tokens": 10
  }
}
```

## Troubleshooting

### –ü–æ–º–∏–ª–∫–∞: "OPENROUTER_API_KEY is required"

**–†—ñ—à–µ–Ω–Ω—è**: –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è —â–æ –∫–ª—é—á –¥–æ–¥–∞–Ω–∏–π –≤ `.env.local` —Ç–∞ —Å–µ—Ä–≤–µ—Ä –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω–∏–π.

### –ü–æ–º–∏–ª–∫–∞: 401 Unauthorized

**–†—ñ—à–µ–Ω–Ω—è**: –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —â–æ API –∫–ª—é—á –≤–∞–ª—ñ–¥–Ω–∏–π —Ç–∞ –º–∞—î credits –Ω–∞ OpenRouter.

### –ü–æ–≤—ñ–ª—å–Ω—ñ –∑–∞–ø–∏—Ç–∏

**–†—ñ—à–µ–Ω–Ω—è**: OpenRouter –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –º–∞—Ä—à—Ä—É—Ç–∏–∑—É—î –∑–∞–ø–∏—Ç–∏. –Ø–∫—â–æ –º–æ–¥–µ–ª—å –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞, –º–æ–∂–µ –±—É—Ç–∏ –Ω–µ–≤–µ–ª–∏–∫–∞ –∑–∞—Ç—Ä–∏–º–∫–∞ –ø—Ä–∏ fallback.

## –ü—ñ–¥—Ç—Ä–∏–º–∫–∞

- OpenRouter Docs: https://openrouter.ai/docs
- OpenRouter Discord: https://discord.gg/openrouter
- GitHub Issues: [–≤–∞—à —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π]

---

**–°—Ç–≤–æ—Ä–µ–Ω–æ**: 2026-01-11
**–í–µ—Ä—Å—ñ—è**: 1.0
